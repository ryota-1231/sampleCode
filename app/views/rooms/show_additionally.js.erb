var messageHeight = messageContainer.scrollHeight
messageContainer.insertAdjacentHTML('afterbegin', "<%= j(render @messages) %>")
var newMessageHeight = messageContainer.scrollHeight
messageContainer.scrollBy(0, newMessageHeight - messageHeight)

<% if @messages.present? %>
    showAdditionally = true
<% end %>